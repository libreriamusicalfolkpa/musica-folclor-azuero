<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Repositorio Musical de Azuero</title>
  <link rel="stylesheet" href="css/estilos.css">
</head>
<body>
  <header>
    <h1>Repositorio Digital de M√∫sica T√≠pica y Folcl√≥rica de Azuero</h1>
    <p>Una propuesta educativa para la preservaci√≥n musical paname√±a</p>
   <nav>
  <a href="index.html" class="btn">Inicio</a>
  <a href="contacto.html" class="btn">Contacto</a>
  <a href="disclaimer.html" class="btn">Disclaimer</a>
</nav>
  </header>

  <!-- üîç Buscador -->
  <section id="buscador">
    <input type="text" id="buscar" placeholder="Buscar por autor, t√≠tulo o g√©nero..." onkeypress="handleBuscar(event)">
  </section>

  <!-- üìö Lista de autores -->
  <main id="autores"></main>

  <!-- ‚öñÔ∏è Pie de p√°gina -->
  <footer>
    <p>¬© 2025 Antonio D√≠az ‚Äî Elaboraci√≥n de un repositorio digital de algunos g√©neros musicales t√≠picos y folcl√≥ricos de la regi√≥n de Azuero en la Rep√∫blica de Panam√°: Una propuesta innovadora para su preservaci√≥n y acceso educativo a trav√©s de una plataforma web.</p>
    <p>Todos los derechos reservados. Tesis.</p>
  </footer>

  <script>
    const input = document.getElementById("buscar");
    const contenedor = document.getElementById("autores");
    let autoresData = [];

    // Cargar datos desde autores.json
    fetch("autores.json")
      .then(res => res.json())
      .then(data => {
        autoresData = data;
        mostrarAutores(data);
      })
      .catch(err => {
        contenedor.innerHTML = "<p style='color:red;'>Error al cargar los datos.</p>";
        console.error(err);
      });

    // Mostrar autores
    function mostrarAutores(lista) {
      contenedor.innerHTML = "";
      lista.forEach(autor => {
        const div = document.createElement("div");
        div.className = "autor-card";
        div.innerHTML = `
          <img src="${autor.imagen}" alt="${autor.nombre}">
          <h3>${autor.nombre}</h3>
          <p>${autor.biografia.substring(0, 100)}...</p>
          <a href="autor.html?nombre=${encodeURIComponent(autor.nombre)}" class="btn">Ver obras</a>
        `;
        contenedor.appendChild(div);
      });
    }

    // Filtrar autores por b√∫squeda en tiempo real
    input.addEventListener("input", e => {
      const texto = e.target.value.toLowerCase();
      const filtrados = autoresData.filter(autor =>
        autor.nombre.toLowerCase().includes(texto) ||
        autor.obras.some(obra =>
          obra.titulo.toLowerCase().includes(texto) ||
          obra.genero.toLowerCase().includes(texto)
        )
      );
      mostrarAutores(filtrados);
    });

    // Redirigir a resultados.html al presionar Enter
    function handleBuscar(e) {
      if (e.key === "Enter") {
        const texto = e.target.value.trim();
        if (texto !== "") {
          window.location.href = `resultados.html?busqueda=${encodeURIComponent(texto)}`;
        }
      }
    }
  </script>
</body>
</html>


